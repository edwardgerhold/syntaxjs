<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <title>Syntax.JS Test Files</title>
    <link href="../../css/syntax.css" rel="stylesheet" type="text/css">
    <link href="../../css/tester.css" rel="stylesheet" type="text/css">
    <style>
        pre {
            background:lightgrey;
        }
        div {

        }
    </style>
</head>
<body>
<h2>syntax.js Tests</h2>

<p>Variables, Lets, Consts, Hoisting, Initialisation</p>

<pre data-syntaxjs-controls="true">
    var el = "#console1";
    console.html(el, "el="+el);
    console.html(el, "hoisting?");
    console.html(el, "(x="+x+")");
    console.html(el, "(y="+y+")");
    console.html(el, "(z="+z+")");
    console.html(el, "now the vars are labeled and defined!");
    var x;
    console.html(el, "x="+x);
    var y = 20;
    console.html(el, "y="+y);
    x = 10;
    console.html(el, "x="+x);    
    var z = x+y;
    console.html(el, "z="+z);        
</pre>
<div id="console1"></div>
<pre data-syntaxjs-controls="true">
    let x;
    let y = 20;
    x = 10;
    let z = x+y;
</pre>

<pre data-syntaxjs-controls="true">
    const x;
    const y = 20;
    x = 10;
    const z = x+y;
</pre>


<pre data-syntaxjs-controls="true">
function f() {
    var el = "#console2";
    console.html(el, "el="+el);
    console.html(el, "hoisting?");
    console.html(el, "(x="+x+")");
    console.html(el, "(y="+y+")");
    console.html(el, "(z="+z+")");
    console.html(el, "now the vars are labeled and defined!");
    var x;
    console.html(el, "x="+x);
    var y = 20;
    console.html(el, "y="+y);
    x = 10;
    console.html(el, "x="+x);    
    var z = x+y;
    console.html(el, "z="+z);        
    return z;
}
</pre>
<div id="console2"></div>

<div id="results"></div>


<script src="../../tools/tester0.js"></script>
<script src="../../syntax0.js"></script>
<script>
window.addEventListener("load", function (e) {

   var test = Test();
   var elements = document.querySelectorAll("pre");
   
   test.add(function () {

       var code = elements[0].innerHTML;
       var result = syntaxjs.eval(code, true, true);
       
       code = "x";
       result = syntaxjs.eval(code, true);
       this.assert(result, 10, code);

       code = "y";
       result = syntaxjs.eval(code, true);
       this.assert(result, 20, code);

       code = "z";       
       result = syntaxjs.eval(code, true);
       this.assert(result, 30, code);
   });
   
   test.add(function () {
        var code = elements[1].innerHTML;
        var result = syntaxjs.eval(code, true, true);
        
	code = "z";       
       result = syntaxjs.eval(code, true);
       this.assert(result, 30, code);
    });
    
    test.add(function () {
        var code = elements[2].innerHTML;
        var result = syntaxjs.eval(code, true, true);

	code = "z";       
       result = syntaxjs.eval(code, true);
       this.assert(result, 30, code);
    });    

   test.add(function () {

       var code = elements[3].innerHTML;
       var result = syntaxjs.eval(code, true, true);
       
       code = "f()";
       result = syntaxjs.eval(code, true);
       this.assert(result, 30, code);

   });

    
   test.run();

   test.html({ el: "#results" });
});
</script>
</body>
</html>